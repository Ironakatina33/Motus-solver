<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Solver Motus / Wordle FR</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1><span class="logo-dot"></span> Solver Motus / Wordle FR</h1>
        <div class="subtitle">
          Joue au Motus, utilise le solveur et suis tes stats, le tout sans perdre ta progression.
        </div>
      </div>
      <div class="pill-row">
        <div class="pill">
          <span class="pill-dot" style="background:#22c55e;"></span>
          <span>ğŸŸ© bien placÃ©</span>
        </div>
        <div class="pill">
          <span class="pill-dot" style="background:#eab308;"></span>
          <span>ğŸŸ¨ mal placÃ©</span>
        </div>
        <div class="pill">
          <span class="pill-dot" style="background:#4b5563;"></span>
          <span>â¬› absent</span>
        </div>
      </div>
    </header>

    <!-- BARRE D'ONGLETS -->
    <nav class="tabs">
      <button class="tab-btn active" data-page="pageGame">ğŸ® Motus</button>
      <button class="tab-btn" data-page="pageSolver">ğŸ§  Solveur</button>
      <button class="tab-btn" data-page="pageStats">ğŸ“Š Stats</button>
    </nav>

    <main>
      <!-- PAGE MOTUS -->
      <div id="pageGame" class="page active">
        <section class="card right">
          <h2>ğŸ® Jeu Motus intÃ©grÃ©</h2>
          <div class="hint">
            Mot secret alÃ©atoire, 6 essais, couleurs automatiques et stats mises Ã  jour automatiquement.
          </div>

          <div class="game-header">
            <span id="gameStatus" class="badge-small">Aucune partie en cours</span>
            <button id="newGameBtn" class="small success">
              ğŸ® Nouvelle partie
            </button>
          </div>

          <div id="gameGrid" class="game-grid">
            <div class="game-empty">Clique sur â€œNouvelle partieâ€ pour commencer.</div>
          </div>

          <div class="game-input-row">
            <input
              type="text"
              id="gameGuessInput"
              placeholder="Tape un mot et appuie sur EntrÃ©e"
              autocomplete="off"
            >
            <button id="gameGuessBtn" class="small">Valider</button>
          </div>
          <div id="gameMessage" class="game-message"></div>

          <div class="info-text">
            La taille du mot de Motus est basÃ©e sur le champ â€œTaille du motâ€ (ou 7 par dÃ©faut).
          </div>
        </section>
      </div>

      <!-- PAGE SOLVEUR -->
      <div id="pageSolver" class="page">
        <section class="card">
          <h2>1ï¸âƒ£ ParamÃ¨tres & dictionnaire (Solveur)</h2>
          <div class="hint">
            Choisis la taille du mot et charge un dictionnaire franÃ§ais (liste_francais*.txt est chargÃ©e automatiquement si possible).
          </div>

          <div class="field-row">
            <label for="wordLength">Taille du mot :</label>
            <input type="number" id="wordLength" min="3" max="12" value="7" style="width:70px;">
            <span class="info-text">
              Si tu laisses vide, la taille sera dÃ©duite automatiquement du premier mot saisi.
            </span>
          </div>

          <div class="field-row">
            <div class="file-input">
              <label for="dictFile">Dictionnaire (.txt) :</label><br>
              <input type="file" id="dictFile" accept=".txt">
            </div>
            <span id="dictStats" class="stat-tag">Mots chargÃ©s : <strong>0</strong></span>
          </div>

          <div class="field-row" style="align-items:flex-start;">
            <div style="flex:1 1 auto;">
              <label for="customDict">Mots supplÃ©mentaires (optionnel) :</label>
              <textarea id="customDict" placeholder="Un mot par ligne, par ex. :
ENIGMES
EPINEUX
ETOILES"></textarea>
            </div>
          </div>

          <div class="info-text">
            Astuce : tÃ©lÃ©charge un gros dictionnaire FR (wordlist / Scrabble / etc.), et charge-le ici
            pour avoir â€œtous les motsâ€.
          </div>

          <hr class="divider">

          <div class="attempts-header">
            <div>
              <div class="title">2ï¸âƒ£ Tentatives Ã  analyser</div>
              <div class="attempts-legend">
                <span class="legend-badge">
                  <span class="legend-swatch legend-grey"></span>â¬› vide â†’ lettre absente
                </span>
                <span class="legend-badge">
                  <span class="legend-swatch legend-yellow"></span>ğŸŸ¨ clic 1 â†’ mauvaise place
                </span>
                <span class="legend-badge">
                  <span class="legend-swatch legend-green"></span>ğŸŸ© clic 2 â†’ bien placÃ©e
                </span>
              </div>
            </div>
            <div>
              <button id="addAttemptBtn" class="small">
                <span>ï¼‹</span>
                <span>Ajouter une tentative</span>
              </button>
            </div>
          </div>

          <div id="attemptsContainer" class="attempts-container"></div>

          <div class="warning-text">
            Ajoute chaque tentative (mot jouÃ© dans un vrai Motus / Wordle), clique sur les lettres
            pour reproduire les couleurs, puis passe Ã  lâ€™onglet â€œSolveurâ€.
          </div>
        </section>

        <section class="card right">
          <h2>3ï¸âƒ£ Suggestions & probabilitÃ©s</h2>
          <div class="hint">
            Le solver filtre le dictionnaire selon toutes les tentatives et classe les mots restants
            selon un score de â€œqualitÃ©â€.
          </div>

          <div class="results-header">
            <div class="results-header-title">Meilleurs mots possibles</div>
            <button id="solveBtn">
              <span>ğŸ§ </span>
              <span>Calculer les suggestions</span>
            </button>
          </div>

          <div class="results-meta">
            <span id="resultsCount" class="badge-small">Candidats : 0</span>
            <span class="badge-small">
              Score basÃ© sur la frÃ©quence des lettres parmi les solutions encore possibles.
            </span>
          </div>

          <div id="constraintsBox" class="constraints-box">
            Aucune contrainte pour lâ€™instant : ajoute au moins une tentative.
          </div>

          <div id="resultsBox" class="results-box">
            <div class="empty">
              âœ Ajoute quelques tentatives puis clique sur â€œCalculer les suggestionsâ€.
            </div>
          </div>

          <div class="info-text">
            Le score nâ€™est pas une vraie probabilitÃ© mathÃ©matique, mais un indicateur :
            plus il est Ã©levÃ©, plus le mot couvre de lettres frÃ©quentes dans les solutions encore possibles.
          </div>
        </section>
      </div>

      <!-- PAGE STATS -->
      <div id="pageStats" class="page">
        <section class="card right">
          <div class="stats-header">
            <h2>ğŸ“Š Historique & statistiques</h2>
            <div class="stats-actions">
              <button id="markWinBtn" class="small success">
                âœ… Marquer comme victoire (manuel)
              </button>
              <button id="markLossBtn" class="small danger">
                âŒ Marquer comme Ã©chec (manuel)
              </button>
            </div>
          </div>

          <div class="hint">
            Les parties jouÃ©es dans lâ€™onglet Motus sont ajoutÃ©es automatiquement ici.
            Tu peux aussi ajouter des parties manuellement.
          </div>

          <div class="stats-grid">
            <div class="stat-box">
              <div class="stat-label">Parties</div>
              <div id="statTotal" class="stat-value">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">Victoires</div>
              <div id="statWins" class="stat-value">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">DÃ©faites</div>
              <div id="statLosses" class="stat-value">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">Winrate</div>
              <div id="statWinrate" class="stat-value small">
                0 %
              </div>
            </div>
            <div class="stat-box">
              <div class="stat-label">SÃ©rie actuelle</div>
              <div id="statStreak" class="stat-value">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">Meilleure sÃ©rie</div>
              <div id="statBestStreak" class="stat-value">0</div>
            </div>
            <div class="stat-box wide">
              <div class="stat-label">Moyenne d'essais (victoires)</div>
              <div id="statAvgGuesses" class="stat-value small">â€”</div>
            </div>
          </div>

          <div class="histogram-container">
            <div class="histogram-title">RÃ©partition des essais (victoires uniquement)</div>
            <div id="histogram" class="histogram"></div>
          </div>

          <div class="history-container">
            <div class="history-title-row">
              <div class="history-title">DerniÃ¨res parties</div>
              <button id="resetStatsBtn" class="small secondary danger-soft">
                ğŸ”„ RÃ©initialiser les stats
              </button>
            </div>
            <ul id="historyList" class="history-list"></ul>
          </div>
        </section>
      </div>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
